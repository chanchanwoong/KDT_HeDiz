<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.config.MypageMapper">

    <!--mypage 조회-->
    <select id="findMypage" resultType="CustomerDTO">
        select cust_seq, cust_name, cust_id, cust_pw, cust_phone, cust_gender from t_customer where cust_seq=#{cust_seq}
    </select>

    <!--예약 정보 조회-->
    <select id="reservation" resultType="ReservationDTO">
        select reserv_seq, reserv_request, reserv_date, reserv_time, reserv_stat,
        (select style_name from t_hairstyle where style_seq = tr.style_seq) as style_name,
        (select shop_name from t_hairshop where shop_seq = tr.shop_seq) as shop_name,
        (select staff_name from t_staff where staff_seq = tr.staff_seq) as staff_name
        from t_reservation tr
        where cust_seq = #{cust_seq}
    </select>

    <!--mypage 수정-->
    <update id="updateMypage" parameterType="CustomerDTO">
        update t_customer set
        cust_name = #{cust_name},
        cust_phone = #{cust_phone}
        where cust_seq = #{cust_seq}
    </update>
</mapper>